<!DOCTYPE html>
<html>
  <head>
    <script src="/demo/demo.js"></script>
  </head>
  <body>
    <form action="/demo/parser/api" method="POST">
      <label>
        Input
        <input id="input" type="address" name="input" />
      </label>

      <pre id="output"></pre>

      <input type="submit" value="Parse" />
    </form>

    <script>
      const input = document.getElementById("input");
      const output = document.getElementById("output");

      let timeout = null;
      input.onkeyup = e => {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          fetch("/demo/parser/api", {
            method: "POST",
            headers: { "Content-Type": "text/plain" },
            body: input.value
          }).then(
            resp => {
              console.log(resp);
              output.innerHTML = JSON.stringify(data, null, "  ");
            },
            reason => {
              console.error(reason);
              output.innerHTML = `${reason}`;
            }
          );
        }, 200);
      };
    </script>
  </body>
</html>
